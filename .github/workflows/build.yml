name: Build APK (Kivy)
on:
workflow_dispatch:
push:
branches: [ main, master ]
jobs:
build-apk:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
- name: Cache .buildozer
uses: actions/cache@v4
with:
path: .buildozer
key: buildozer-{{ runner.os }}-{{ hashFiles('buildozer.spec') }}
restore-keys: |
buildozer-${{ runner.os }}-
- name: Build with kivy/buildozer (Docker)
run: |
# El comando de Buildozer para compilar la aplicaci√≥n Kivy
docker run --rm -v "$PWD":/home/buildozer 
kivy/buildozer 
buildozer -v android debug
- name: Gather APK
run: |
mkdir -p dist_apk
# Copiar el APK de la ruta de 64-bit (arm64-v8a)
cp .buildozer/android/platform/build-arm64-v8a/dists//bin/.apk dist_apk/ || true
# Copiar el APK de la ruta de 32-bit (armeabi-v7a) (si se compila)
cp .buildozer/android/platform/build-armeabi-v7a/dists//bin/.apk dist_apk/ || true
cp bin/.apk dist_apk/ || true
- name: Upload artifact
uses: actions/upload-artifact@v4
with:
name: bitacora-apk
path: dist_apk/.apk